@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}:root{--primary-color:#2c3e50;--secondary-color:#3498db;--accent-color:#e67e22;--text-color:#34495e;--background-color:#767676;--card-bg:white;--shadow:0 2px 10px rgba(0,0,0,0.1);--seppia-on:0}[data-theme=moderno]{--primary-color:#2c3e50;--secondary-color:#3498db;--accent-color:#e67e22;--text-color:#34495e;--background-color:#767676;--card-bg:white;--shadow:0 2px 10px rgba(0,0,0,0.1);--seppia-on:0}[data-theme=vintage]{--primary-color:#3E2723;--secondary-color:#8D6E63;--accent-color:#D84315;--text-color:#4E342E;--background-color:#FFF8E1;--card-bg:#FFECB3;--shadow:0 2px 10px rgba(62, 39, 35, 0.2);--seppia-on:1}[data-theme=grazia_deledda]{--primary-color:#fb694a;--secondary-color:#027b76;--accent-color:#D84315;--text-color:#fcf3ea;--background-color:#dbae8d;--card-bg:#343434;--shadow:0 2px 10px rgba(0,0,0,0.1);--seppia-on:0}[data-theme=july],[data-theme=may]{--shadow:0 2px 8px rgba(84, 135, 73, 0.15);--seppia-on:0}[data-theme=may]{--primary-color:#548749;--secondary-color:#bab759;--accent-color:#fd6842;--text-color:#548749;--background-color:#fcf4ea;--card-bg:#fecca5;--interactive-bg:#c1dfe3}[data-theme=july]{--primary-color:#e86c4f;--secondary-color:#f4a2ac;--accent-color:#dbae8d;--text-color:#e86c4f;--background-color:#027a76;--card-bg:#bfddce;--interactive-bg:#f2e5d3}.theme-switcher{position:fixed;top:1rem;right:1rem;z-index:3000;padding:.5rem;border-radius:8px;box-shadow:var(--shadow)}#map,.theme-switcher button{overflow:hidden;position:relative}.theme-switcher button{margin:0 .3rem;padding:.5rem 1rem;background:var(--accent-color);color:var(--card-bg);border:0;border-radius:4px;cursor:pointer;transition:all .3s ease}.theme-switcher button:hover,button:hover{filter:brightness(1.1)}.theme-switcher button::before{content:"";position:absolute;top:0;left:0;width:100%;height:4px;background:var(--accent-color)}body{transition:background-color .5s ease,color .3s ease;margin:0;font-family:"Segoe UI",system-ui,sans-serif;color:var(--text-color);background:var(--background-color);min-height:100vh;display:flex;flex-direction:column}.modal,.progress-container{transition:background-color .3s ease,box-shadow .3s ease}header{background:var(--primary-color);color:#fff;text-align:center}#map{flex:1;min-height:300px;margin:1rem;border-radius:8px;box-shadow:var(--shadow);background:#f0e6d3!important;height:100vh}.leaflet-tile-container img{filter:sepia(var(--seppia-on)) hue-rotate(-30deg) contrast(.8)}.modal,.progress-container,header{padding:1rem;box-shadow:var(--shadow)}.progress-container{position:fixed;bottom:.3rem;right:-3rem;border-radius:8px;z-index:1000;display:flex;gap:1rem;align-items:center;scale:.8;width:250px}.modal{transform:translate(-50%,-50%);max-width:90%}.overlay,.spinner{display:none;position:fixed}.overlay{top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);z-index:1000}button,input{border-radius:4px}button{padding:.5rem 1rem;border:0;background:var(--secondary-color);color:#fff;cursor:pointer;transition:all .2s ease}input{padding:.5rem;border:1px solid #ddd;margin:.5rem 0}.spinner{border:4px solid #f3f3f3;border-top:4px solid var(--secondary-color);border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1002}.toast,.welcome-cover{position:fixed;color:#fff}.toast{top:30%;left:50%;transform:translateX(-50%);background:var(--primary-color);padding:1rem 2rem;border-radius:4px;box-shadow:var(--shadow);display:none;z-index:1003}.welcome-cover{top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,var(--background-color),var(--background-color));display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2000;transition:all 1s ease;opacity:1}.welcome-cover.hidden{opacity:0;pointer-events:none}.welcome-content{text-align:center;max-width:600px;padding:2rem;animation:slideUp 1s ease;color:var(--card-bg)}.subtitle,.title{color:var(--text-color)}.title{font-size:3.5rem;margin-bottom:1rem;text-shadow:var(--shadow)}.subtitle{font-size:1.5rem;margin-bottom:2rem;opacity:.9}.start-button{font-size:1.2rem;padding:1rem 2rem;border-radius:50px;background:var(--primary-color);border:0;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow);color:var(--card-bg)}.start-button:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.3);background:#d35400}.decorative-icon{width:150px;height:150px;margin-bottom:2rem;filter:drop-shadow(var(--shadow))}.instructions-modal{display:none;position:fixed;top:45%;left:50%;transform:translate(-50%,-50%);background:var(--secondary-color);padding:2rem;border-radius:10px;max-width:500px;width:75%;z-index:2001;box-shadow:var(--shadow);color:var(--text-color)}.instructions-modal.active{display:block}.instructions-modal h2{color:var(--primary-color);margin-bottom:1.5rem}.instructions-modal ol{text-align:left;line-height:1.6}.instructions-modal button{background:var(--accent-color);color:var(--card-bg)}.grazia_deledda_container{position:absolute;right:-89px;bottom:-34px;display:block;margin-top:1rem;z-index:-1}.grazia_deledda_img{width:100%;max-width:410px}.location-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:1000;display:flex;flex-direction:column;opacity:0;transition:opacity .5s ease;pointer-events:none}.location-screen.active{opacity:1;pointer-events:all}.location-image{flex:1;background-image:url(https://images.unsplash.com/photo-1604525090246-9e4e0e1e6a8d);background-size:cover;background-position:center;position:relative}.location-image::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(0deg,rgba(0,0,0,.9) 10%,rgba(0,0,0,.3) 50%)}.location-content{position:absolute;bottom:0;left:0;right:0;padding:2rem;color:#fff;text-align:center;background:linear-gradient(transparent,rgba(0,0,0,.9))}.location-title{font-size:2.5rem;margin-bottom:1rem;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.location-description{max-width:600px;margin:0 auto 2rem;font-size:1.1rem;line-height:1.6;opacity:.9}.location-actions{display:flex;gap:1rem;justify-content:center}.action-button{padding:1rem;border:0;border-radius:30px;background:var(--secondary-color);color:#fff;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,.3)}.action-button.secondary{background:var(--secondary-color)!important;border:2px solid var(--secondary-color)!important}.action-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.4)}.secondary{margin:10px!important}.final-content{position:relative;top:10px;text-align:center;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.7);padding:.1rem;background:linear-gradient(45deg,rgba(143,45,86,.8),rgba(34,87,122,.8));border-radius:15px}.quote{font-style:italic;margin:2rem 0;font-size:1.2rem;line-height:1.6}.prize-buttons button{background:#e67e22;padding:1rem 2rem;margin:.5rem;border-radius:25px;font-size:1.1rem}.nobel-link a{color:#f1c40f;text-decoration:none;font-weight:700}@media screen and (max-width:768px){.location-content{padding:8px}.location-title{font-size:1.5rem;line-height:1.2}.location-description{font-size:1rem;line-height:1.4}}.location-content{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;pointer-events:none}.location-content .location-actions button{user-select:auto;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;pointer-events:auto}.touch-indicator{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none;z-index:10;transition:opacity .5s ease}.touch-hint{background-color:rgba(0,0,0,.6);color:#fff;padding:15px 20px;border-radius:10px;text-align:center;max-width:80%}.touch-icon{font-size:30px;margin-bottom:10px;animation:pulse 1.5s infinite}.touch-swipe-hint{margin-top:10px;font-size:.9em;opacity:.8}.progress{position:absolute;top:0;right:0;left:0;padding:4px;text-align:right;font-weight:700;z-index:999999;background:linear-gradient(rgba(0,0,0,.25),transparent)}.leaflet-routing-container,.modal{display:none}.modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.8);background:var(--card-bg);border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,.15),0 15px 35px rgba(0,0,0,.1),inset 0 1px 0 rgba(255,255,255,.1);max-width:90vw;width:480px;max-height:90vh;z-index:1001;overflow:hidden;opacity:0;transition:all .4s cubic-bezier(.34,1.56,.64,1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.modal.active{display:block;opacity:1;transform:translate(-50%,-50%) scale(1)}.modal-header,.modal-icon{display:flex;align-items:center}.modal-header{position:relative;padding:24px 24px 16px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;justify-content:space-between}.modal-icon{justify-content:center;width:50px;height:50px;background:rgba(255,255,255,.15);border-radius:50%;backdrop-filter:blur(10px)}.treasure-icon{font-size:24px;animation:float 3s ease-in-out infinite}.close-btn{position:relative;width:40px;height:40px;border:0;background:rgba(255,255,255,.1);color:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:24px;transition:all .3s ease;backdrop-filter:blur(10px)}.close-btn:hover{background:rgba(255,255,255,.2);transform:scale(1.1)}.close-btn:active{transform:scale(.95)}.modal-body{padding:0}.plaque-image-container{position:relative;overflow:hidden}.plaque-image-container img{width:100%;height:200px;object-fit:contain;transition:transform .3s ease}.plaque-image-container:hover img{transform:scale(1.05)}.image-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(to bottom,transparent 0,transparent 60%,rgba(0,0,0,.3) 100%);display:flex;align-items:flex-end;justify-content:flex-end;padding:16px;opacity:0;transition:opacity .3s ease}.plaque-image-container:hover .image-overlay{opacity:1}.book-icon{font-size:32px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.3))}.modal-content{padding:32px 24px;text-align:center}.modal-title{font-size:24px;color:var(--primary-color);margin:0 0 8px;font-weight:700;background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.modal-subtitle{color:var(--text-color);margin:0 0 24px;opacity:.8;font-size:16px;line-height:1.4}.answer-form{margin:0}.inputs-container{margin:24px 0;display:flex;flex-direction:column;gap:16px;align-items:center}.inputs-container input{width:100%;max-width:300px;padding:16px 20px;border:2px solid rgba(0,0,0,.1);border-radius:12px;font-size:16px;color:var(--primary-color);transition:all .3s ease;backdrop-filter:blur(5px)}.inputs-container input:focus{outline:0;border-color:var(--secondary-color);box-shadow:0 0 0 4px rgba(52,152,219,.1),0 8px 25px rgba(0,0,0,.1);transform:translateY(-2px)}.inputs-container input::placeholder{color:rgba(0,0,0,.4);font-style:italic}.verify-btn{position:relative;display:inline-flex;align-items:center;gap:12px;padding:16px 32px;background:linear-gradient(135deg,var(--accent-color),#e67e22);color:#fff;border:0;border-radius:50px;font-size:18px;font-weight:600;cursor:pointer;transition:all .3s ease;overflow:hidden;box-shadow:0 8px 25px rgba(230,126,34,.3),0 4px 12px rgba(0,0,0,.15);text-transform:uppercase;letter-spacing:.5px}.verify-btn:hover{transform:translateY(-3px);box-shadow:0 12px 35px rgba(230,126,34,.4),0 8px 20px rgba(0,0,0,.2)}.verify-btn:active{transform:translateY(-1px)}.btn-icon{font-size:20px;animation:pulse 2s infinite}.btn-text{position:relative;z-index:2}.btn-ripple{position:absolute;top:50%;left:50%;width:0;height:0;background:rgba(255,255,255,.3);border-radius:50%;transform:translate(-50%,-50%);transition:width .6s ease,height .6s ease}.verify-btn:active .btn-ripple{width:300px;height:300px}.modal-footer{padding:20px 24px 24px;background:rgba(0,0,0,.02);display:flex;justify-content:center;border-top:1px solid rgba(0,0,0,.05)}.progress-indicator{display:flex;gap:8px;align-items:center}.progress-dot{width:8px;height:8px;border-radius:50%;background:rgba(0,0,0,.2);transition:all .3s ease}.progress-dot.active{background:var(--secondary-color);transform:scale(1.3);box-shadow:0 0 12px rgba(52,152,219,.5)}.overlay{background:rgba(0,0,0,.6);backdrop-filter:blur(8px);transition:all .3s ease}.overlay.active{display:block}@media (max-width:768px){.modal{width:95vw;margin:2px;border-radius:16px}.modal-content{padding:24px 20px}.modal-title{font-size:20px}.verify-btn{padding:14px 28px;font-size:16px}.inputs-container input{padding:14px 18px;font-size:16px}}@media (max-width:480px){.modal-header{padding:20px 16px 12px}.modal-content{padding:20px 16px}.verify-btn{width:100%;justify-content:center}}[data-theme=vintage] .modal{background:var(--card-bg);border:2px solid var(--primary-color);box-shadow:0 20px 40px rgba(62,39,35,.2),inset 0 1px 0 rgba(255,255,255,.1)}[data-theme=vintage] .modal-header{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color))}[data-theme=grazia_deledda] .modal{background:var(--card-bg);border:2px solid var(--secondary-color)}[data-theme=grazia_deledda] .modal-header{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color))}